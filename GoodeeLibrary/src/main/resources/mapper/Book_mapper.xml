<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.min.edu.model.book.BookDaoImpl">
  
<!-- 훼손 도서 목록 조회 -->
<select id="damagedBookList" parameterType="java.lang.Integer" resultType="bookDto">
	SELECT b.THUMBNAIL , b.TITLE , b.AUTHORS , b.PUBLISHER , b.CONTENTS 
		FROM BOOK b JOIN BOOK_DETAIL bd
		ON b.BOOK_SEQ = bd.BOOK_SEQ 
		WHERE bd.DAMAGE_SEQ = #{damage_seq}
</select>

<!-- 미훼손 도서 목록 조회 -->
<select id="undamagedBookList" parameterType="java.lang.Integer" resultType="bookDto">
	<![CDATA[
	SELECT b.THUMBNAIL , b.TITLE , b.AUTHORS , b.PUBLISHER , b.CONTENTS 
		FROM BOOK b JOIN BOOK_DETAIL bd
		ON b.BOOK_SEQ = bd.BOOK_SEQ 
		WHERE #{damage_seq} < 4 
	]]>
</select>

</mapper>
